- content_for(:title, "注册")
.row
  .col-md-6.col-md-offset-3
    .panel.panel-wikis
      .panel-heading
        %h2= t('.sign up')
      .panel-body
        = form_tag(users_path, multipart: true, method: :post) do 
          = render 'shareds/errors'
          = render 'shareds/flash'
          .form-group
            %i.glyphicon.glyphicon-user
            = text_field_tag :name, nil, placeholder: "用户名...", class: "form-control", tabindex: 1

          .form-group
            %i.glyphicon.glyphicon-envelope
            = text_field_tag :email, nil, placeholder: "邮箱...", class: "form-control", tabindex: 2

          .form-group
            %i.glyphicon.glyphicon-phone
            = text_field_tag :phone, nil, placeholder: "手机号码...", class: "form-control", tabindex: 3

          .form-group
            = text_field_tag :verification, nil, size: 6
            = button_tag "点击获取验证码", class: "btn btn-info", id: "get_sms_code"
            
          .form-group
            %i.glyphicon.glyphicon-lock
            = password_field_tag :password, nil, placeholder: "密码...", class: 'form-control', tabindex: 4
            
          -#.form-group#ru
            = rucaptcha_input_tag placeholder: "请输入验证码", class: "form-control", tabindex: 5
            = link_to rucaptcha_image_tag, "#", alt: 'Captcha', id: "rucaptcha", remote: true

          .form-group
          = file_field_tag :image

          %br
            = submit_tag t('.signup'), class: 'btn btn-primary', data: { disable_with: "注册中..." }, tabindex: 7
            |
            = link_to t('.Back'), new_article_path

          :javascript
            $("#get_sms_code").click(function(){
              var phone = $("#phone").val();
              if (phone){
                $.ajax({
                  type: "POST",
                  url: "get_sms_code_users_path,
                  dataType: 'json',
                  success:function(result){
                    alert('ok');
                  },
                  error:function(result){
                    alert('error');
                  }
                });
              } else{
                alert("请输入电话号码");
                event.preventDefault();
              }
            })